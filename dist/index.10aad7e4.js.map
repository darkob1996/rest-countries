{"mappings":"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","sources":["js/model.js","js/views/countryView.js","js/views/formView.js","js/views/headerView.js","js/views/resultsView.js","js/views/selectView.js","js/controller.js"],"sourcesContent":["export const state = {\n  results: [],\n  result: \"\",\n  menuOpened: false,\n  mode: \"light\",\n\n  filter: {\n    country: \"\",\n    region: \"\",\n    countriesByRegion: [],\n  },\n};\n\nexport const switchMode = function () {\n  state.mode === \"light\" ? (state.mode = \"dark\") : (state.mode = \"light\");\n\n  document.documentElement.setAttribute(\"data-mode\", state.mode);\n};\n\nexport const updateCountry = function (capital) {\n  state.result = state.results.find((country) => {\n    return country.capital?.[0] === capital;\n  });\n};\n\nexport const loadCountry = function (country) {\n  return state.results.find((c) => c.name.common === country);\n};\n\nexport const findCountryByName = function (query) {\n  state.filter.country = query;\n\n  return state.results.find(\n    (country) => country.name.common.toLowerCase() === state.filter.country\n  );\n};\n\nexport const findCountriesByRegion = function (query) {\n  state.filter.region = query;\n\n  state.filter.countriesByRegion = state.results.filter(\n    (country) => country.region === state.filter.region\n  );\n};\n\nexport const loadAllResults = async function () {\n  const res = await fetch(\"https://restcountries.com/v3.1/all\");\n  const data = await res.json();\n\n  state.results = data;\n};\n","class countryView {\n  _data;\n  _parentElement = document.querySelector(\".main\");\n\n  _fraction(num) {\n    const numReversed = num + \"\";\n\n    return [...numReversed]\n      .reverse()\n      .reduce((acc, mov, i) => {\n        if ((i + 1) % 3 === 0 && i + 1 !== numReversed.length) {\n          acc.push(`,${mov}`);\n          return acc;\n        } else {\n          acc.push(mov);\n          return acc;\n        }\n      }, [])\n      .reverse()\n      .join(\"\");\n  }\n\n  _generateMarkup() {\n    return `\n      <div class=\"country\">\n        <a href=\"#\" class=\"country__back-btn\">&larr; Back</a>\n\n        <div class=\"country__info\">\n            <img\n                src=\"${this._data.result.flags.png}\"\n                alt=\"Country flag\"\n                class=\"country__info--img\"\n            />\n\n            <div class=\"country__info--container\">\n            <h1 class=\"country__info--heading\"> ${\n              this._data.result.name.common\n            }</h1>\n\n            <div class=\"country__info--details\">\n                <p class=\"country__info--paragraph\">\n                Native name:\n                <span>${\n                  this._data.result.name.nativeName[\n                    Object.keys(this._data.result.name.nativeName)[0]\n                  ].common\n                }</span>\n                </p>\n\n                <p class=\"country__info--paragraph\">\n                Top level domain:\n                <span>${this._data.result.tld}</span>\n                </p>\n\n                <p class=\"country__info--paragraph\">\n                Population:\n                <span>${this._fraction(this._data.result.population)}</span>\n                </p>\n\n                <p class=\"country__info--paragraph\">\n                Currencies:\n                <span>${\n                  this._data.result.currencies[\n                    Object.keys(this._data.result.currencies)[0]\n                  ].name\n                }</span>\n                </p>\n\n                <p class=\"country__info--paragraph\">\n                Region:\n                <span>${this._data.result.region}</span>\n                </p>\n\n                <p class=\"country__info--paragraph\">\n                Languages:\n                <span>${Object.keys(this._data.result.languages)\n                  .map((lang) => this._data.result.languages[lang])\n                  .join(\", \")}</span>\n                </p>\n\n                <p class=\"country__info--paragraph\">\n                Sub Region:\n                <span>${this._data.result.subregion}</span>\n                </p>\n\n                <p class=\"country__info--paragraph\">\n                Capital:\n                <span>${this._data.result.capital.join(\", \")}</span>\n                </p>\n            </div>\n\n            <div class=\"country__info--borders\">\n                <span class=\"country__info--subheading\">Border countries:</span>\n                <div>\n                 ${this._data.results\n                   .filter((country) => {\n                     return this._data.result.borders?.includes(country.cca3);\n                   })\n                   .map((country) => {\n                     return `\n                        <span class=\"country__info--border\">${country.name.common}</span>\n                     `;\n                   })\n                   .join(\"\")}\n               </div>\n            </div>\n            </div>\n        </div>\n      </div>\n    `;\n  }\n\n  _clear() {\n    this._parentElement.innerHTML = \"\";\n  }\n\n  _render(data) {\n    this._data = data;\n\n    const markup = this._generateMarkup();\n    this._clear();\n    this._parentElement.insertAdjacentHTML(\"afterbegin\", markup);\n    this.goToHomePage();\n  }\n\n  _addHandlerCountry(handler) {\n    this._parentElement.addEventListener(\"click\", function (e) {\n      e.preventDefault();\n\n      const country = e.target.closest(\".card\");\n      if (!country) return;\n\n      const capital = country.querySelector(\n        \".card__capital--number\"\n      ).textContent;\n\n      handler(capital);\n    });\n  }\n\n  goToHomePage() {\n    document\n      .querySelector(\".country__back-btn\")\n      .addEventListener(\"click\", function () {\n        location.reload();\n      });\n  }\n}\n\nexport default new countryView();\n","class formView {\n  _parentElement = document.querySelector(\".main__form\");\n  _menu = document.querySelector(\".select-menu\");\n\n  _toggleMenu(opened) {\n    opened\n      ? this._menu.classList.remove(\"hidden\")\n      : this._menu.classList.add(\"hidden\");\n  }\n\n  _addHandlerFilterByRegion(handler) {\n    this._parentElement.addEventListener(\"click\", function (e) {\n      const btn = e.target.closest(\".main__form--select\");\n      if (!btn) return;\n\n      handler();\n    });\n  }\n\n  _addHandlerFilterByCountry(handler) {\n    this._parentElement.addEventListener(\"submit\", function (e) {\n      e.preventDefault();\n\n      const country = this.querySelector(\".main__form--input\").value;\n      this.querySelector(\".main__form--input\").value = \"\";\n\n      handler(country);\n    });\n  }\n}\n\nexport default new formView();\n","class headerView {\n  _parentElement = document.querySelector(\".header\");\n\n  _addHandlerSwitchMode(handler) {\n    this._parentElement.addEventListener(\"click\", function (e) {\n      const button = e.target.closest(\".header__nav--mode\");\n\n      if (!button) return;\n\n      handler();\n    });\n  }\n}\n\nexport default new headerView();\n","class resultsView {\n  _data;\n  _parentElement = document.querySelector(\".main__content\");\n\n  _fraction(num) {\n    const numReversed = num + \"\";\n\n    return [...numReversed]\n      .reverse()\n      .reduce((acc, mov, i) => {\n        if ((i + 1) % 3 === 0 && i + 1 !== numReversed.length) {\n          acc.push(`,${mov}`);\n          return acc;\n        } else {\n          acc.push(mov);\n          return acc;\n        }\n      }, [])\n      .reverse()\n      .join(\"\");\n  }\n\n  _generateMarkup() {\n    return `\n          ${this._data\n            .map((country, i) => {\n              return `\n            <div class=\"card\" data-num=\"${i}\">\n                <img src=\"${country.flags.png}\" class=\"card__img\" />\n                <div class=\"card__content\">\n                    <h1 class=\"card__heading\">${country.name.official}</h1>\n                    <p class=\"card__paragraph card__population\">\n                        Population:\n                        <span class=\"card__population--number\">${this._fraction(\n                          country.population\n                        )}</span>\n                    </p>\n\n                    <p class=\"card__paragraph card__region\">\n                        Region:\n                        <span class=\"card__region--number\">${\n                          country.region\n                        }</span>\n                    </p>\n\n                    <p class=\"card__paragraph card__capital\">\n                        Capital:\n                        <span class=\"card__capital--number\">${\n                          country.capital\n                            ? `${country.capital[0]}`\n                            : \"No capital\"\n                        }</span>\n                    </p>\n                </div>\n            </div>    \n            `;\n            })\n            .join(\"\")}\n    `;\n  }\n\n  _clear() {\n    this._parentElement.innerHTML = \"\";\n  }\n\n  _render(data) {\n    Array.isArray(data) ? (this._data = data) : (this._data = [data]);\n\n    const markup = this._generateMarkup();\n    this._clear();\n    this._parentElement.insertAdjacentHTML(\"afterbegin\", markup);\n  }\n\n  _addHandlerResults(handler) {\n    window.addEventListener(\"load\", handler);\n  }\n}\n\nexport default new resultsView();\n","class selectView {\n  _parentElement = document.querySelector(\".select-menu\");\n\n  _addHandlerFilterByRegion(handler) {\n    this._parentElement.addEventListener(\"click\", function (e) {\n      e.preventDefault();\n\n      const option = e.target.closest(\".select-menu__item\");\n      if (!option) return;\n\n      handler(option.textContent.trim());\n\n      option.closest(\".main__form--select\").firstChild.textContent =\n        option.textContent;\n    });\n  }\n}\n\nexport default new selectView();\n","import * as model from \"./model\";\nimport countryView from \"./views/countryView\";\nimport formView from \"./views/formView\";\nimport headerView from \"./views/headerView\";\nimport resultsView from \"./views/resultsView\";\nimport selectView from \"./views/selectView\";\n\nconst showCountry = function (capital) {\n  model.updateCountry(capital);\n\n  countryView._render(model.state);\n};\n\nconst showResults = async function () {\n  // 1. Load all results from Rest API\n  await model.loadAllResults();\n\n  // 2. Render all the results on page\n  resultsView._render(model.state.results);\n};\n\nconst toggleMenu = function () {\n  // 1. Switch boolean in state\n  model.state.menuOpened = !model.state.menuOpened;\n\n  // 2.\n  formView._toggleMenu(model.state.menuOpened);\n};\n\nconst filterByCountry = function (query) {\n  // 1. Search for a country in model\n  const country = model.findCountryByName(query);\n\n  resultsView._render(country);\n};\n\nconst filterByRegion = function (query) {\n  // 1. Update state by countries with query region\n  model.findCountriesByRegion(query);\n\n  // 2. Send that countries to resultsView for rendering\n  resultsView._render(model.state.filter.countriesByRegion);\n};\n\nconst switchMode = function () {\n  // 1. Switch mode in state\n  model.switchMode();\n};\n\nconst init = function () {\n  resultsView._addHandlerResults(showResults);\n  countryView._addHandlerCountry(showCountry);\n  formView._addHandlerFilterByRegion(toggleMenu);\n  formView._addHandlerFilterByCountry(filterByCountry);\n  selectView._addHandlerFilterByRegion(filterByRegion);\n  headerView._addHandlerSwitchMode(switchMode);\n};\n\ninit();\n"],"names":["$f381a3c3b9cf5311$export$ca000e230c0caa3e","results","result","menuOpened","mode","filter","country","region","countriesByRegion","$ebc4d3c8848c3447$export$2e2bcd8739ae039","_data","_parentElement","document","querySelector","_fraction","num","numReversed","reverse","reduce","acc","mov","i","length","push","join","_generateMarkup","this","flags","png","name","common","nativeName","Object","keys","tld","population","currencies","languages","map","lang","subregion","capital","borders","includes","cca3","_clear","innerHTML","_render","data","markup","insertAdjacentHTML","goToHomePage","_addHandlerCountry","handler","addEventListener","e","preventDefault","target","closest","textContent","location","reload","$cb81c545b6479e16$export$2e2bcd8739ae039","_menu","_toggleMenu","opened","classList","remove","add","_addHandlerFilterByRegion","_addHandlerFilterByCountry","value","$2f5d8ad7a444fb0f$export$2e2bcd8739ae039","_addHandlerSwitchMode","$8f1f46095f7e634a$export$2e2bcd8739ae039","official","Array","isArray","_addHandlerResults","window","$4decc1c5ce89342d$export$2e2bcd8739ae039","option","trim","firstChild","$03cf872f16b5d10b$var$showCountry","find","$f381a3c3b9cf5311$export$e0ccb46679ba73b3","$03cf872f16b5d10b$var$showResults","async","res","fetch","json","$f381a3c3b9cf5311$export$315e8443f93a5ee0","$03cf872f16b5d10b$var$toggleMenu","$03cf872f16b5d10b$var$filterByCountry","query","toLowerCase","$f381a3c3b9cf5311$export$a9c82693ff8179b9","$03cf872f16b5d10b$var$filterByRegion","$f381a3c3b9cf5311$export$1f1d4a321813f72","$03cf872f16b5d10b$var$switchMode","documentElement","setAttribute"],"version":3,"file":"index.10aad7e4.js.map"}