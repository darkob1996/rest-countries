const n={results:[],result:"",menuOpened:!1,mode:"light",filter:{country:"",region:"",countriesByRegion:[]}};var e=new class{_data;_parentElement=document.querySelector(".main");_fraction(n){const e=n+"";return[...e].reverse().reduce(((n,t,a)=>(a+1)%3==0&&a+1!==e.length?(n.push(`,${t}`),n):(n.push(t),n)),[]).reverse().join("")}_generateMarkup(){return`\n      <div class="country">\n        <a href="#" class="country__back-btn">&larr; Back</a>\n\n        <div class="country__info">\n            <img\n                src="${this._data.result.flags.png}"\n                alt="Country flag"\n                class="country__info--img"\n            />\n\n            <div class="country__info--container">\n            <h1 class="country__info--heading"> ${this._data.result.name.common}</h1>\n\n            <div class="country__info--details">\n                <p class="country__info--paragraph">\n                Native name:\n                <span>${this._data.result.name.nativeName[Object.keys(this._data.result.name.nativeName)[0]].common}</span>\n                </p>\n\n                <p class="country__info--paragraph">\n                Top level domain:\n                <span>${this._data.result.tld}</span>\n                </p>\n\n                <p class="country__info--paragraph">\n                Population:\n                <span>${this._fraction(this._data.result.population)}</span>\n                </p>\n\n                <p class="country__info--paragraph">\n                Currencies:\n                <span>${this._data.result.currencies[Object.keys(this._data.result.currencies)[0]].name}</span>\n                </p>\n\n                <p class="country__info--paragraph">\n                Region:\n                <span>${this._data.result.region}</span>\n                </p>\n\n                <p class="country__info--paragraph">\n                Languages:\n                <span>${Object.keys(this._data.result.languages).map((n=>this._data.result.languages[n])).join(", ")}</span>\n                </p>\n\n                <p class="country__info--paragraph">\n                Sub Region:\n                <span>${this._data.result.subregion}</span>\n                </p>\n\n                <p class="country__info--paragraph">\n                Capital:\n                <span>${this._data.result.capital.join(", ")}</span>\n                </p>\n            </div>\n\n            <div class="country__info--borders">\n                <span class="country__info--subheading">Border countries:</span>\n                <div>\n                 ${this._data.results.filter((n=>this._data.result.borders?.includes(n.cca3))).map((n=>`\n                        <span class="country__info--border">${n.name.common}</span>\n                     `)).join("")}\n               </div>\n            </div>\n            </div>\n        </div>\n      </div>\n    `}_clear(){this._parentElement.innerHTML=""}_render(n){this._data=n;const e=this._generateMarkup();this._clear(),this._parentElement.insertAdjacentHTML("afterbegin",e),this.goToHomePage()}_addHandlerCountry(n){this._parentElement.addEventListener("click",(function(e){e.preventDefault();const t=e.target.closest(".card");if(!t)return;const a=t.querySelector(".card__capital--number").textContent;n(a)}))}goToHomePage(){document.querySelector(".country__back-btn").addEventListener("click",(function(){location.reload()}))}};var t=new class{_parentElement=document.querySelector(".main__form");_menu=document.querySelector(".select-menu");_toggleMenu(n){n?this._menu.classList.remove("hidden"):this._menu.classList.add("hidden")}_addHandlerFilterByRegion(n){this._parentElement.addEventListener("click",(function(e){e.target.closest(".main__form--select")&&n()}))}_addHandlerFilterByCountry(n){this._parentElement.addEventListener("submit",(function(e){e.preventDefault();const t=this.querySelector(".main__form--input").value;this.querySelector(".main__form--input").value="",n(t)}))}};var a=new class{_parentElement=document.querySelector(".header");_addHandlerSwitchMode(n){this._parentElement.addEventListener("click",(function(e){e.target.closest(".header__nav--mode")&&n()}))}};var r=new class{_data;_parentElement=document.querySelector(".main__content");_fraction(n){const e=n+"";return[...e].reverse().reduce(((n,t,a)=>(a+1)%3==0&&a+1!==e.length?(n.push(`,${t}`),n):(n.push(t),n)),[]).reverse().join("")}_generateMarkup(){return`\n          ${this._data.map(((n,e)=>`\n            <div class="card" data-num="${e}">\n                <img src="${n.flags.png}" class="card__img" />\n                <div class="card__content">\n                    <h1 class="card__heading">${n.name.official}</h1>\n                    <p class="card__paragraph card__population">\n                        Population:\n                        <span class="card__population--number">${this._fraction(n.population)}</span>\n                    </p>\n\n                    <p class="card__paragraph card__region">\n                        Region:\n                        <span class="card__region--number">${n.region}</span>\n                    </p>\n\n                    <p class="card__paragraph card__capital">\n                        Capital:\n                        <span class="card__capital--number">${n.capital?`${n.capital[0]}`:"No capital"}</span>\n                    </p>\n                </div>\n            </div>    \n            `)).join("")}\n    `}_clear(){this._parentElement.innerHTML=""}_render(n){Array.isArray(n)?this._data=n:this._data=[n];const e=this._generateMarkup();this._clear(),this._parentElement.insertAdjacentHTML("afterbegin",e)}_addHandlerResults(n){window.addEventListener("load",n)}};var s=new class{_parentElement=document.querySelector(".select-menu");_addHandlerFilterByRegion(n){this._parentElement.addEventListener("click",(function(e){e.preventDefault();const t=e.target.closest(".select-menu__item");t&&(n(t.textContent.trim()),t.closest(".main__form--select").firstChild.textContent=t.textContent)}))}};const i=function(t){!function(e){n.result=n.results.find((n=>n.capital?.[0]===e))}(t),e._render(n)},o=async function(){await async function(){const e=await fetch("https://restcountries.com/v3.1/all"),t=await e.json();n.results=t}(),r._render(n.results)},c=function(){n.menuOpened=!n.menuOpened,t._toggleMenu(n.menuOpened)},l=function(e){const t=function(e){return n.filter.country=e,n.results.find((e=>e.name.common.toLowerCase()===n.filter.country))}(e);r._render(t)},d=function(e){!function(e){n.filter.region=e,n.filter.countriesByRegion=n.results.filter((e=>e.region===n.filter.region))}(e),r._render(n.filter.countriesByRegion)},u=function(){"light"===n.mode?n.mode="dark":n.mode="light",document.documentElement.setAttribute("data-mode",n.mode)};r._addHandlerResults(o),e._addHandlerCountry(i),t._addHandlerFilterByRegion(c),t._addHandlerFilterByCountry(l),s._addHandlerFilterByRegion(d),a._addHandlerSwitchMode(u);
//# sourceMappingURL=index.10aad7e4.js.map
